@using MarketAI.API.Models
@{
    Layout = "_Layout";
}
@model UserModel
<style>
    .popup-item{
        margin-top: 10px;
        height:30px;
    }
    .popup-close{
        margin-top: -30px !important;
    }
    .popup-error{
       color: red;
    }
 </style>


     <div class="container">
        <div class="row">
            <div class="dashboard-header">
                <div class="titledash"><i class="las la-user-circle"></i> Профиль</div>
            </div>

            <div class="col-md-12">
                <div class="wbalert">
                    Давайте познакомимся чуть ближе, заполните короткую форму о себе. 
                </div>
            </div>

            <div class="col-md-2"></div>

            <div class="col-md-8">
                <div class="profileedit">
                    <form asp-action="UpdateUser" asp-controller="Users" method="post" enctype="multipart/form-data">
                        <input type="hidden" asp-for="Id" value="@Model.Id" />
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label lbwhite">Имя</label>
                                    <input type="text" asp-for="Name" value="@Model.Name" class="form-control form1" placeholder="Имя">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label lbwhite">Email</label>
                                    <input type="email" asp-for="Email" value="@Model.Email" class="form-control form1" placeholder="Email">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label lbwhite">Ниша</label>
                                    <input type="text" asp-for="Activity" value="@Model.Activity" class="form-control form1" placeholder="Ниша">
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label lbwhite">Фамилия</label>
                                    <input type="text" asp-for="Surname"  value="@Model.Surname" class="form-control form1" placeholder="Фамилия">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label lbwhite">Телефон</label>
                                    <input type="tel" asp-for="Phone" value="@Model.Phone" class="form-control form1" placeholder="Телефон">
                                </div>

                                <div class="mb-3">
                                    <label for="wbfileupload" class="wbfileupload">
                                        <div class="dbicon folderdark"></div> Загрузить аватар
                                    </label>
                                    <input id="wbfileupload" name="file" type="file"/>
                                </div>

                            </div>

                            <!-- SAVE -->
                            <div class="col-md-3"></div>
                            <div class="col-md-6">
                                <button class="saveprofile">Сохранить изменения</button>
                            </div>
                            <div class="iconsetting"></div>
                            <div class="col-md-3"></div>


                        </div>
                    </form>
                </div>
            </div>

            <div class="col-md-2"></div>
        </div>
    </div>


   <!-- Popups -->

        
@*
          <div class="modal" id="activatePromocode">
             <div class="modal-dialog">
                <div class="modal-content">
                   <!-- Modal Header -->
                   <div class="modal-header">
                      <h4 class="modal-title">Активация промокода</h4>
                      <button type="button" class="close popup-close" data-dismiss="modal">&times;</button>
                   </div>
                   <!-- Modal body -->
                   <div class="modal-body">
                     <div class="form-group popup-item">
                        <label class="col-sm-2 control-label text-right ">Введите промокод</label>
                        <div class="col-sm-10 popup_item"><input id="promocode" type="text" required class="form-control" name="Name"></div>
                     </div>
                   </div>
                   <!-- Modal footer -->
                   <div class="modal-footer" >
                        <button type="button" onclick="activatePromocode()" class="btn btn-primary popup_item" data-dismiss="modal">Активировать</button>
                        <button type="button" class="btn btn-light popup_item" data-dismiss="modal">Отмена</button>
                   </div>
                </div>
             </div>
          </div>


          <div class="modal" id="myModal">
             <div class="modal-dialog">
                <div class="modal-content">
                   <!-- Modal Header -->
                   <div class="modal-header">
                      <h4 class="modal-title">Добавление ключа Wildberries</h4>
                      <button type="button" class="close popup-close" data-dismiss="modal">&times;</button>
                   </div>
                   <!-- Modal body -->
                   <div class="modal-body">
                     <div class="form-group popup-item">
                        <label class="col-sm-2 control-label text-right ">Название</label>
                        <div class="col-sm-10 popup_item"><input id="apikey_name" type="text" required class="form-control" name="Name"></div>
                     </div>
                     <div class="form-group popup-item">
                         <label class="col-sm-2 control-label text-right">Токен</label>
                         <div  class="col-sm-10 popup_item"><input  id="apikey_token" type="text" name="APIKey" required class="form-control"></div>
                     </div>
                   </div>
                   <!-- Modal footer -->
                   <div class="modal-footer" >
                        <button type="button" onclick="addApiKey()" class="btn btn-primary popup_item" data-dismiss="modal">Добавить</button>
                        <button type="button" class="btn btn-light popup_item" data-dismiss="modal">Отмена</button>
                   </div>
                </div>
             </div>
          </div>*@




    <!--end Popups -->
    <script>

     





    
        async function activatePromocode() {

        let promocode = document.getElementById('promocode');


        let model = {
            Id : @Model.Id,
            ActivatedPromocode : promocode.value
        };

        let response = await fetch('/ActivatePromocode', 
                  {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json;charset=utf-8'
                      },
                      body: JSON.stringify(model),
                  });
          document.location.reload();
       }
    </script>