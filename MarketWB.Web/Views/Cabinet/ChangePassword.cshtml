@{
    Layout = "_Layout";
}
@model MarketAI.API.Models.UserModel

    <div class="panel-body">
        <div class="col-md-12">
            <h3 class="animated fadeInLeft">Смена пароля</h3>
        </div>
    </div>

    <form id="form" class="panel-body" style="padding-bottom:30px;" asp-action="ChangePassword" asp-controller="Users" asp-route-user="@Model" method="POST">
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-sm-2 control-label text-right">Новый пароль</label>
                <div class="col-sm-10"><input id="new_password" type="password" required class="form-control" asp-for="Password"></div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label text-right">Повторите пароль</label>
                <div class="col-sm-10"><input id="repeat_password" type="password" required class="form-control"></div>
            </div>
            <input class="submit btn btn-danger col-sm-12 " style="margin-top:10px;" type="button" onclick="changePassword()" value="Сменить пароль">
            <h5 id="validation_error" style="color: red; margin-top: 10px; text-align:center; "></h5>
        </div>
    </form>

<script>
    async function changePassword() {

        let new_password = document.getElementById('new_password');
        let repeat_password = document.getElementById('repeat_password');
        let validation_error = document.getElementById('validation_error');


        if (new_password.value != repeat_password.value) {
            validation_error.innerHTML = 'Пароли должны совпадать';
            return;
        }
        if (new_password.value.length < 6) {
            validation_error.innerHTML = 'Минимальная длина пароля должно составлять 6 символов';
            return;
        }

        document.getElementById('form').submit();

    }
</script>